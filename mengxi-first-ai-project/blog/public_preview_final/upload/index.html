<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>æ™ºèƒ½æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ | Mengxi&#39;s Blog</title>

<meta name="description"
    content="">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&family=Fira+Code:wght@400;500&family=Patrick+Hand&family=EB+Garamond:ital,wght@0,400;0,600;1,400&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">


<link rel="icon" type="image/png" sizes="32x32" href="/%20images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/%20images/favicon-16x16.png">


<link rel="stylesheet" href="/%20css/unified-styles.css">
<link rel="stylesheet" href="/%20css/pudding-modern.css">
<link rel="stylesheet" href="/%20css/image-zoom.css">

<style>
    body {
        opacity: 0;
        animation: fadeInPage 0.5s ease-out forwards;
    }

    @keyframes fadeInPage {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }
</style>
</head>

<body class="theme-knowledge">
    <div class="hn-header" id="top-nav">
    <div class="hn-header-content">
        <h1 class="hn-title">
            <a href="/">Mengxi&#39;s Blog</a>
        </h1>
        <nav class="hn-nav">
            <a href="/posts">Posts</a>
            <a href="/graph">Graph</a>
            <a href="/timeline">Timeline</a>
            <a href="/search">Search</a>
        </nav>
    </div>
</div>

    <main class="u-container u-py-xl">
        
<header class="u-text-center" style="margin-bottom: var(--space-xl);">
    <h1 class="u-text-4xl u-font-bold u-mb-md">ğŸ“ æ™ºèƒ½æ–‡ä»¶ä¸Šä¼ ç³»ç»Ÿ</h1>
    <p class="u-text-lg u-text-light">å¿«é€Ÿä¸Šä¼ å›¾ç‰‡ä¸æ–‡ä»¶åˆ°äº‘ç«¯å­˜å‚¨</p>
</header>


<div class="upload-grid">
    
    <div class="u-card">
        <div class="u-text-center">
            <span class="upload-icon">ğŸ–¼ï¸</span>
            <h2 class="u-text-2xl u-font-bold">å›¾ç‰‡æ–‡ä»¶ä¸Šä¼ </h2>
            <p class="u-text-sm u-text-light">æ”¯æŒ JPG, PNG, GIF, WebP</p>
        </div>

        <div id="image-drop-zone" class="drop-zone">
            <p class="u-mb-md">ç‚¹å‡»æˆ–æ‹–æ‹½å›¾ç‰‡åˆ°è¿™é‡Œ</p>
            <input type="file" id="image-file-input" class="file-input" accept="image/*">
            <button class="u-btn u-btn--primary"
                onclick="document.getElementById('image-file-input').click()">é€‰æ‹©å›¾ç‰‡</button>
        </div>
    </div>

    
    <div class="u-card">
        <div class="u-text-center">
            <span class="upload-icon">ğŸ“„</span>
            <h2 class="u-text-2xl u-font-bold">å…¶ä»–æ–‡ä»¶ä¸Šä¼ </h2>
            <p class="u-text-sm u-text-light">æ”¯æŒ PDF, è§†é¢‘, æ–‡æ¡£ç­‰</p>
        </div>

        <div id="file-drop-zone" class="drop-zone">
            <p class="u-mb-md">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°è¿™é‡Œ</p>
            <input type="file" id="general-file-input" class="file-input" accept="*/*">
            <button class="u-btn u-btn--secondary"
                onclick="document.getElementById('general-file-input').click()">é€‰æ‹©æ–‡ä»¶</button>
        </div>
    </div>
</div>


<div id="result" class="u-card" style="display: none">
    <h3 class="u-text-xl u-font-bold u-mb-md" style="color: var(--success-color, #2ecc71);">âœ… ä¸Šä¼ æˆåŠŸï¼</h3>
    <div class="file-info">
        <strong class="u-block u-mb-sm">æ–‡ä»¶ URLï¼š</strong>
        <input type="text" id="image-url" class="url-input" readonly>
    </div>
    <button class="u-btn u-btn--outline" onclick="copyUrl()">å¤åˆ¶é“¾æ¥</button>

    <div id="file-preview"></div>
</div>

<style>
     
    .upload-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-xl);
        margin-top: var(--space-xl);
    }

    .drop-zone {
        border: 2px dashed var(--knowledge-border);
        border-radius: var(--radius-md);
        padding: var(--space-xl);
        text-align: center;
        cursor: pointer;
        transition: all var(--transition-base);
        background: var(--knowledge-bg-light);
        margin-top: var(--space-md);
    }

    .drop-zone:hover,
    .drop-zone.hover {
        border-color: var(--knowledge-primary);
        background: rgba(45, 106, 79, 0.05);
         
        transform: translateY(-2px);
    }

    .upload-icon {
        font-size: 3rem;
        margin-bottom: var(--space-md);
        display: block;
    }

    .file-input {
        display: none;
    }

    #result {
        margin-top: var(--space-xl);
        border-left: 5px solid var(--success-color, #2ecc71);
    }

    #file-preview img,
    #file-preview video,
    #file-preview iframe {
        max-width: 100%;
        border-radius: var(--radius-md);
        box-shadow: var(--shadow-sm);
        margin-top: var(--space-md);
    }

    .url-input {
        width: 100%;
        padding: var(--space-sm);
        border: 1px solid var(--text-light);
        border-radius: var(--radius-sm);
        font-family: monospace;
        margin-bottom: var(--space-sm);
    }
</style>

<script>
    
    const API_URL = 'https://mengxi-upload-worker.jinxiyue07.workers.dev/';

    
    const imageDropZone = document.getElementById('image-drop-zone');
    const imageFileInput = document.getElementById('image-file-input');

    
    const fileDropZone = document.getElementById('file-drop-zone');
    const generalFileInput = document.getElementById('general-file-input');

    const result = document.getElementById('result');
    const imageUrl = document.getElementById('image-url');
    const filePreview = document.getElementById('file-preview');

    
    if (imageDropZone) {
        imageDropZone.addEventListener('click', (e) => {
            if (e.target.tagName !== 'BUTTON') imageFileInput.click();
        });

        imageDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            imageDropZone.classList.add('hover');
        });

        imageDropZone.addEventListener('dragleave', () => {
            imageDropZone.classList.remove('hover');
        });

        imageDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            imageDropZone.classList.remove('hover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                if (files[0].type.startsWith('image/')) {
                    uploadFile(files[0]);
                } else {
                    alert('è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼');
                }
            }
        });
    }

    if (imageFileInput) {
        imageFileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                uploadFile(e.target.files[0]);
            }
        });
    }

    
    if (fileDropZone) {
        fileDropZone.addEventListener('click', (e) => {
            if (e.target.tagName !== 'BUTTON') generalFileInput.click();
        });

        fileDropZone.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileDropZone.classList.add('hover');
        });

        fileDropZone.addEventListener('dragleave', () => {
            fileDropZone.classList.remove('hover');
        });

        fileDropZone.addEventListener('drop', (e) => {
            e.preventDefault();
            fileDropZone.classList.remove('hover');
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                if (!files[0].type.startsWith('image/')) {
                    uploadFile(files[0]);
                } else {
                    alert('è¯·ä¸Šä¼ åˆ°å›¾ç‰‡ä¸Šä¼ åŒºåŸŸï¼');
                }
            }
        });
    }

    if (generalFileInput) {
        generalFileInput.addEventListener('change', (e) => {
            if (e.target.files.length > 0) {
                uploadFile(e.target.files[0]);
            }
        });
    }

    
    async function uploadFile(file) {
        const formData = new FormData();
        formData.append('file', file);

        try {
            let currentDropZone;
            if (file.type.startsWith('image/')) {
                currentDropZone = imageDropZone;
            } else {
                currentDropZone = fileDropZone;
            }

            const originalContent = currentDropZone.innerHTML;
            currentDropZone.innerHTML = '<p class="u-animate-pulse">â³ ä¸Šä¼ ä¸­...</p>';

            const response = await fetch(API_URL, {
                method: 'POST',
                body: formData
            });

            const data = await response.json();
            if (data.success) {
                const fileUrl = data.url;
                imageUrl.value = fileUrl;

                if (file.type.startsWith('image/')) {
                    filePreview.innerHTML = `<strong>å›¾ç‰‡é¢„è§ˆï¼š</strong><br><img src="${fileUrl}" alt="ä¸Šä¼ çš„å›¾ç‰‡">`;
                } else if (file.type.startsWith('video/')) {
                    filePreview.innerHTML = `<strong>è§†é¢‘é¢„è§ˆï¼š</strong><br><video src="${fileUrl}" controls>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾ã€‚</video>`;
                } else if (file.type === 'application/pdf') {
                    filePreview.innerHTML = `<strong>PDF é¢„è§ˆï¼š</strong><br><iframe src="${fileUrl}" width="100%" height="500px"></iframe>`;
                } else {
                    filePreview.innerHTML = `<strong>æ–‡ä»¶å·²ä¸Šä¼ ï¼Œä¸æ”¯æŒåœ¨çº¿é¢„è§ˆ</strong>`;
                }

                result.style.display = 'block';
                currentDropZone.innerHTML = originalContent; 
            } else {
                alert('ä¸Šä¼ å¤±è´¥ï¼š' + data.error);
                currentDropZone.innerHTML = originalContent;
            }
        } catch (error) {
            alert('ä¸Šä¼ å¤±è´¥ï¼š' + error.message);
            
            window.location.reload();
        }
    }

    function copyUrl() {
        imageUrl.select();
        imageUrl.setSelectionRange(0, 99999);
        document.execCommand('copy');
        alert('é“¾æ¥å·²æˆåŠŸå¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
    }
</script>

    </main>

    <footer class="u-container u-py-xl u-text-center">
    <div class="u-mb-md">
        <span class="u-text-2xl">ğŸŒ±</span>
    </div>
    <p class="u-text-light">
        Â© 2026 Mengxi&#39;s Blog. Cultivated with intention.
    </p>
</footer>

    
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        document.querySelectorAll('pre code.language-mermaid').forEach(el => {
            const pre = el.parentElement;
            const div = document.createElement('div');
            div.className = 'mermaid';
            div.textContent = el.textContent;
            pre.replaceWith(div);
        });
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            securityLevel: 'loose',
            themeVariables: {
                fontFamily: '"Patrick Hand", cursive',
                fontSize: '18px',
                primaryColor: '#fffef0',
                primaryTextColor: '#2c3e50',
                primaryBorderColor: '#2c3e50',
                lineColor: '#2c3e50',
                secondaryColor: '#f1c40f',
                tertiaryColor: '#fff'
            }
        });
    </script>

    
    <script src="/%20js/copy-code.js"></script>
    <script src="/%20js/hn-interactions.js"></script>
    <script src="/%20js/image-zoom.js"></script>
    <script src="/%20js/ux-booster.js"></script>

    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const observerOptions = {
                threshold: 0.1
            };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.reveal-item').forEach(el => observer.observe(el));
        });
    </script>
</body>

</html>