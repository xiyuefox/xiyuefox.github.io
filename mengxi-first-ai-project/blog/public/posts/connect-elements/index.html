<!DOCTYPE html>
<html lang="zh-cn">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Connect elements | Mengxi&#39;s Blog</title>


<link href="https://fonts.googleapis.com" rel="preconnect" />
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
<link
    href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap"
    rel="stylesheet" />


<link rel="stylesheet" href="/css/unified-styles.css">
</head>

<body class="theme-knowledge">
    <nav class="u-nav">
    <div class="u-container u-nav__container">
        <a href="http://localhost:1313/" class="u-nav__brand">
            <span class="u-nav__logo-emoji">ðŸŒ¿</span> Mengxi&#39;s Blog
        </a>
        <ul class="u-nav__links">
            
            <li><a href="/" class="u-nav__link ">Home</a></li>
            
            <li><a href="/posts" class="u-nav__link ">Posts</a></li>
            
            <li><a href="/search" class="u-nav__link ">Search</a></li>
            
            <li><a href="/timeline/" class="u-nav__link ">Timeline</a></li>
            
            <li><a href="/guide/" class="u-nav__link ">Guide</a></li>
            
            <li><a href="/upload/" class="u-nav__link ">Upload</a></li>
            
        </ul>
    </div>
</nav>

    <main class="u-container u-py-xl">
        
<header class="u-text-center u-mb-xl">
    <h1>Connect elements</h1>
    <div class="u-flex u-justify-center u-gap-md u-text-light">
        <span>Dec 14, 2025</span>
        <span>â€¢</span>
        <span>2 min read</span>
    </div>
</header>

<article class="u-card" style="max-width: 800px; margin: 0 auto;">
    <div class="content">
        <p>/*
<img src="https://raw.githubusercontent.com/zsviczian/obsidian-excalidraw-plugin/master/images/scripts-connect-elements.jpg" alt=""></p>
<p>This script will connect two objects with an arrow. If either of the objects are a set of grouped elements (e.g. a text element grouped with an encapsulating rectangle), the script will identify these groups, and connect the arrow to the largest object in the group (assuming you want to connect the arrow to the box around the text element).</p>
<p>See documentation for more details:
<a href="https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html">https://zsviczian.github.io/obsidian-excalidraw-plugin/ExcalidrawScriptsEngine.html</a></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#f92672">*</span><span style="color:#960050;background-color:#1e0010">/</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">verifyMinimumPluginVersion</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">verifyMinimumPluginVersion</span>(<span style="color:#e6db74">&#34;1.5.21&#34;</span>)) {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Notice</span>(<span style="color:#e6db74">&#34;This script requires a newer version of Excalidraw. Please install the latest version.&#34;</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">settings</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">getScriptSettings</span>();
</span></span><span style="display:flex;"><span><span style="color:#75715e">//set default values on first run
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Starting arrowhead&#34;</span>]) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">settings</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>	  <span style="color:#e6db74">&#34;Starting arrowhead&#34;</span> <span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;none&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">valueset</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;none&#34;</span>,<span style="color:#e6db74">&#34;arrow&#34;</span>,<span style="color:#e6db74">&#34;triangle&#34;</span>,<span style="color:#e6db74">&#34;bar&#34;</span>,<span style="color:#e6db74">&#34;dot&#34;</span>]
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;Ending arrowhead&#34;</span> <span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;triangle&#34;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">valueset</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#34;none&#34;</span>,<span style="color:#e6db74">&#34;arrow&#34;</span>,<span style="color:#e6db74">&#34;triangle&#34;</span>,<span style="color:#e6db74">&#34;bar&#34;</span>,<span style="color:#e6db74">&#34;dot&#34;</span>]
</span></span><span style="display:flex;"><span>		},
</span></span><span style="display:flex;"><span>		<span style="color:#e6db74">&#34;Line points&#34;</span> <span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#a6e22e">value</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">description</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;Number of line points between start and end&#34;</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	};
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">setScriptSettings</span>(<span style="color:#a6e22e">settings</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">arrowStart</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Starting arrowhead&#34;</span>].<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;none&#34;</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Starting arrowhead&#34;</span>].<span style="color:#a6e22e">value</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">arrowEnd</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Ending arrowhead&#34;</span>].<span style="color:#a6e22e">value</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;none&#34;</span> <span style="color:#f92672">?</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Ending arrowhead&#34;</span>].<span style="color:#a6e22e">value</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">linePoints</span> <span style="color:#f92672">=</span> Math.<span style="color:#a6e22e">floor</span>(<span style="color:#a6e22e">settings</span>[<span style="color:#e6db74">&#34;Line points&#34;</span>].<span style="color:#a6e22e">value</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">elements</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">getViewSelectedElements</span>();
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">copyViewElementsToEAforEditing</span>(<span style="color:#a6e22e">elements</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">groups</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">getMaximumGroups</span>(<span style="color:#a6e22e">elements</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">groups</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#ae81ff">2</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//unfortunately getMaxGroups returns duplicated resultset for sticky notes
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//needs additional filtering
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">cleanGroups</span><span style="color:#f92672">=</span>[];
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">idList</span> <span style="color:#f92672">=</span> [];
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">for</span> (<span style="color:#a6e22e">group</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">groups</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">keep</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span>(<span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">group</span>) <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">idList</span>.<span style="color:#a6e22e">contains</span>(<span style="color:#a6e22e">item</span>.<span style="color:#a6e22e">id</span>)) <span style="color:#a6e22e">keep</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">keep</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">cleanGroups</span>.<span style="color:#a6e22e">push</span>(<span style="color:#a6e22e">group</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">idList</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">idList</span>.<span style="color:#a6e22e">concat</span>(<span style="color:#a6e22e">group</span>.<span style="color:#a6e22e">map</span>(<span style="color:#a6e22e">el</span>=&gt;<span style="color:#a6e22e">el</span>.<span style="color:#a6e22e">id</span>))
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">cleanGroups</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">groups</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">cleanGroups</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">els</span> <span style="color:#f92672">=</span> [ 
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">getLargestElement</span>(<span style="color:#a6e22e">groups</span>[<span style="color:#ae81ff">0</span>]),
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">getLargestElement</span>(<span style="color:#a6e22e">groups</span>[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">strokeColor</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">strokeColor</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">strokeWidth</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">strokeWidth</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">strokeStyle</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">strokeStyle</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">strokeSharpness</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">strokeSharpness</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">connectObjects</span>(
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">0</span>].<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">els</span>[<span style="color:#ae81ff">1</span>].<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">null</span>, 
</span></span><span style="display:flex;"><span>  {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">endArrowHead</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">arrowEnd</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">startArrowHead</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">arrowStart</span>, 
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">numberOfPoints</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">linePoints</span>
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">ea</span>.<span style="color:#a6e22e">addElementsToView</span>(<span style="color:#66d9ef">false</span>,<span style="color:#66d9ef">false</span>,<span style="color:#66d9ef">true</span>);
</span></span></code></pre></div>
    </div>
</article>

    </main>

    <footer class="u-container u-py-xl u-text-center">
    <div class="u-mb-md">
        <span class="u-text-2xl">ðŸŒ±</span>
    </div>
    <p class="u-text-light">
        Â© 2025 Mengxi&#39;s Blog. Cultivated with intention.
    </p>
</footer>
</body>

</html>